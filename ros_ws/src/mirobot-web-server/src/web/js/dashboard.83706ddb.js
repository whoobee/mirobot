(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{ec95:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[1==this.status_config.robot_con.en?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("card",{attrs:{type:"chart"}},["engaged"!=this.robot_ws.state?e("base-button",{staticClass:"animation-on-hover",attrs:{block:"",type:"danger"},on:{click:function(s){return t.engageRosNode()}}},[e("i",{staticClass:"tim-icons icon-bell-55 icon-spaceship"}),t._v(" Engage\n        ")]):e("base-button",{staticClass:"animation-on-hover",attrs:{block:"",type:"info"},on:{click:function(s){return t.engageRosNode()}}},[e("i",{staticClass:"tim-icons icon-bell-55 icon-button-power"}),t._v(" Disengage\n        ")]),e("br"),e("p",{staticClass:"text-muted unselectable",staticStyle:{"font-size":"10px"}},[t._v("(*) if websocket is up, this command will start/stop master ROS node")])],1)],1)]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("card",{staticStyle:{height:"150px"},attrs:{type:"chart"}},[e("template",{slot:"header"},[e("h4",{staticClass:"unselectable",staticStyle:{"border-bottom":"1px solid gray"}},[e("i",{staticClass:"tim-icons icon-bell-55 text-danger "}),t._v(" System Status\n          ")])]),e("div",{staticClass:"copyright"},[e("ul",{staticClass:"list-unstyled"},[this.status_config.drive.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Drive status: \n              "),"connected"==this.status.drive?e("span",{staticClass:"text-success"},[t._v(t._s(t.status.drive)+"\n              ")]):e("span",{staticClass:"text-danger"},[t._v(t._s(t.status.drive)+"\n              ")])]):t._e(),this.status_config.sensor.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Sensors status: \n              "),"connected"==this.status.sensors?e("span",{staticClass:"text-success"},[t._v(t._s(t.status.sensors)+"\n              ")]):e("span",{staticClass:"text-danger"},[t._v(t._s(t.status.sensors)+"\n              ")])]):t._e()])])],2)],1),e("div",{staticClass:"col-lg-4"},[e("card",{staticStyle:{height:"150px"},attrs:{type:"chart"}},[e("template",{slot:"header"},[e("h4",{staticClass:"unselectable",staticStyle:{"border-bottom":"1px solid gray"}},[e("i",{staticClass:"tim-icons icon-sound-wave text-info "}),t._v(" Current\n          ")])]),e("div",{staticClass:"copyright"},[e("ul",{staticClass:"list-unstyled"},[this.status_config.current_1.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Drive#1 Current: \n              "),this.current.drive_1>800?e("span",{staticClass:"text-danger"},[t._v(t._s(t.current.drive_1)+" "),e("small",[t._v("m")]),t._v("A\n              ")]):e("span",{staticClass:"text-success"},[t._v(t._s(t.current.drive_1)+" "),e("small",[t._v("m")]),t._v("A\n              ")])]):t._e(),this.status_config.current_2.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Drive#2 Current: \n              "),this.current.drive_1>800?e("span",{staticClass:"text-danger"},[t._v(t._s(t.current.drive_2)+" "),e("small",[t._v("m")]),t._v("A\n              ")]):e("span",{staticClass:"text-success"},[t._v(t._s(t.current.drive_2)+" "),e("small",[t._v("m")]),t._v("A\n              ")])]):t._e()])])],2)],1),e("div",{staticClass:"col-lg-4"},[e("card",{staticStyle:{height:"150px"},attrs:{type:"chart"}},[e("template",{slot:"header"},[e("h4",{staticClass:"unselectable",staticStyle:{"border-bottom":"1px solid gray"}},[e("i",{staticClass:"tim-icons icon-alert-circle-exc text-success "}),t._v(" Temperature\n          ")])]),e("div",{staticClass:"copyright"},[e("ul",{staticClass:"list-unstyled"},[this.status_config.temp_1.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Drive#1 Temp: \n              "),this.temp.drive_1>80?e("span",{staticClass:"text-danger"},[t._v(t._s(t.temp.drive_1)+" 째C\n              ")]):e("span",{staticClass:"text-success"},[t._v(t._s(t.temp.drive_1)+" 째C\n              ")])]):t._e(),this.status_config.temp_2.en?e("li",{staticClass:"unselectable",staticStyle:{padding:"5px"}},[t._v("\n              Drive#2 Temp: \n              "),this.temp.drive_2>80?e("span",{staticClass:"text-danger"},[t._v(t._s(t.temp.drive_2)+" 째C\n              ")]):e("span",{staticClass:"text-success"},[t._v(t._s(t.temp.drive_2)+" 째C\n              ")])]):t._e()])])],2)],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[this.status_config.message.en?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header mb-5"},[e("h5",{staticClass:"card-category unselectable"},[t._v("Messages")]),e("div",{staticClass:"table-full-width table-responsive col-12",staticStyle:{height:"400px"}},[e("base-table",{staticStyle:{"font-size":"12px"},attrs:{data:t.debugTable.data,columns:t.debugTable.columns,"thead-classes":"text-primary"}})],1),e("br"),e("p",{staticClass:"text-muted unselectable",staticStyle:{"font-size":"10px"}},[t._v("(*) max messages displaied ( "+t._s(t.debugTable.maxMsgDisplaid)+" )")])])]):t._e()])])])},a=[],n=e("bd86"),o=(e("c5f6"),e("56d7")),c=e("2af9");Number.prototype.pad=function(t){var s=String(this);while(s.length<(t||2))s="0"+s;return s};var r={components:{BaseTable:c["f"]},computed:{current_state:function(){return this.$store.getters.getStatus}},data:function(){return Object(n["a"])({status_config:{poll_rate:2e3,robot_con:{en:!0,address:"ws://192.168.0.45",port:"8090"},message:{topic:"/rosout",msg:"rosgraph_msgs/Log",en:!0},drive:{topic:"/odrive/status",msg:"std_msgs/String",en:!0},sensor:{topic:"/camera/realsense2_camera_manager/bond",msg:"bond/Status",en:!0},current_1:{topic:"/odrive/left/current",msg:"std_msgs/Float64",en:!0},current_2:{topic:"/odrive/right/current",msg:"std_msgs/Float64",en:!0},temp_1:{topic:"/odrive/left/temperature",msg:"std_msgs/Float64",en:!0},temp_2:{topic:"/odrive/right/temperature",msg:"std_msgs/Float64",en:!0}},robot_ws:{state:"disconnected",socket:null},status:{drive:"n/c",sensors:"n/c"},current:{drive_1:0,drive_2:0},temp:{drive_1:0,drive_2:0},debugTable:{title:"/rosout",columns:["Timestamp","Name","Message"],data:[],maxMsgDisplaid:500},messages_topic:null,drive_status_topic:null,current_1_topic:null,current_2_topic:null,temp_1_topic:null,temp_2_topic:null,sensors_topic:null},"debugTable",{title:"/rosout",columns:["Timestamp","Name","Message"],data:[],maxMsgDisplaid:500})},methods:{configure:function(){this.$cookies.isKey("configuration_data")?(this.status_config.robot_con.en=this.$cookies.get("configuration_data").status_config.robot_con.en,this.status_config.robot_con.address=this.$cookies.get("configuration_data").status_config.robot_con.address,this.status_config.robot_con.port=this.$cookies.get("configuration_data").status_config.robot_con.port,this.status_config.poll_rate=this.$cookies.get("configuration_data").status_config.poll_rate,this.status_config.message.topic=this.$cookies.get("configuration_data").status_config.message.topic,this.status_config.message.msg=this.$cookies.get("configuration_data").status_config.message.msg,this.status_config.message.en=this.$cookies.get("configuration_data").status_config.message.en,this.status_config.drive.topic=this.$cookies.get("configuration_data").status_config.drive.topic,this.status_config.drive.msg=this.$cookies.get("configuration_data").status_config.drive.msg,this.status_config.drive.en=this.$cookies.get("configuration_data").status_config.drive.en,this.status_config.sensor.topic=this.$cookies.get("configuration_data").status_config.sensor.topic,this.status_config.sensor.msg=this.$cookies.get("configuration_data").status_config.sensor.msg,this.status_config.sensor.en=this.$cookies.get("configuration_data").status_config.sensor.en,this.status_config.current_1.topic=this.$cookies.get("configuration_data").status_config.current_1.topic,this.status_config.current_1.msg=this.$cookies.get("configuration_data").status_config.current_1.msg,this.status_config.current_1.en=this.$cookies.get("configuration_data").status_config.current_1.en,this.status_config.current_2.topic=this.$cookies.get("configuration_data").status_config.current_2.topic,this.status_config.current_2.msg=this.$cookies.get("configuration_data").status_config.current_2.msg,this.status_config.current_2.en=this.$cookies.get("configuration_data").status_config.current_2.en,this.status_config.temp_1.topic=this.$cookies.get("configuration_data").status_config.temp_1.topic,this.status_config.temp_1.msg=this.$cookies.get("configuration_data").status_config.temp_1.msg,this.status_config.temp_1.en=this.$cookies.get("configuration_data").status_config.temp_1.en,this.status_config.temp_2.topic=this.$cookies.get("configuration_data").status_config.temp_2.topic,this.status_config.temp_2.msg=this.$cookies.get("configuration_data").status_config.temp_2.msg,this.status_config.temp_2.en=this.$cookies.get("configuration_data").status_config.temp_2.en):(this.status_config.robot_con.en=!0,this.status_config.robot_con.address="ws://192.168.0.45",this.status_config.robot_con.port=8090,this.status_config.poll_rate=2e3,this.status_config.message.topic="/rosout",this.status_config.message.msg="rosgraph_msgs/Log",this.status_config.message.en=!0,this.status_config.drive.topic="/odrive/status",this.status_config.drive.msg="std_msgs/String",this.status_config.drive.en=!0,this.status_config.sensor.topic="/camera/realsense2_camera_manager/bond",this.status_config.sensor.msg="bond/Status",this.status_config.sensor.en=!0,this.status_config.current_1.topic="/odrive/left/current",this.status_config.current_1.msg="std_msgs/Float64",this.status_config.current_1.en=!0,this.status_config.current_2.topic="/odrive/right/current",this.status_config.current_2.msg="std_msgs/Float64",this.status_config.current_2.en=!0,this.status_config.temp_1.topic="/odrive/left/temperature",this.status_config.temp_1.msg="std_msgs/Float64",this.status_config.temp_1.en=!0,this.status_config.temp_2.topic="/odrive/right/temperature",this.status_config.temp_2.msg="std_msgs/Float64",this.status_config.temp_2.en=!0,this.notifyVue("danger","Configuration not found.","Configuration cookie was not found. Loading default default settings."))},init:function(){var t=this;console.log("Dash-init"),1==this.status_config.message.en&&(this.messages_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.message.topic,messageType:this.status_config.message.msg}),this.messages_topic.subscribe(this.updateDebugTableData)),1==this.status_config.drive.en&&(this.drive_status_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.drive.topic,messageType:this.status_config.drive.msg,throttle_rate:this.status_config.poll_rate}),this.drive_status_topic.subscribe(this.getDriveStatus)),1==this.status_config.current_1.en&&(this.current_1_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.current_1.topic,messageType:this.status_config.current_1.msg,throttle_rate:this.status_config.poll_rate}),this.current_1_topic.subscribe(this.getDrive1Current)),1==this.status_config.current_2.en&&(this.current_2_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.current_2.topic,messageType:this.status_config.current_2.msg,throttle_rate:this.status_config.poll_rate}),this.current_2_topic.subscribe(this.getDrive2Current)),1==this.status_config.temp_1.en&&(this.temp_1_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.temp_1.topic,messageType:this.status_config.temp_1.msg,throttle_rate:this.status_config.poll_rate}),this.temp_1_topic.subscribe(this.getDrive1Temp)),1==this.status_config.temp_2.en&&(this.temp_2_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.temp_2.topic,messageType:this.status_config.temp_2.msg,throttle_rate:this.status_config.poll_rate}),this.temp_2_topic.subscribe(this.getDrive2Temp)),1==this.status_config.sensor.en&&(this.sensors_topic=new ROSLIB.Topic({ros:this.current_state.ros_con,name:this.status_config.sensor.topic,messageType:this.status_config.sensor.msg,throttle_rate:this.status_config.poll_rate}),this.sensors_topic.subscribe(this.getSensorsData)),setTimeout((function(){return t.stopStatusSubscribers()}),5e3)},deinit:function(){this.unsubscribeTopics()},notifyVue:function(t,s,e){this.$notify({title:s,message:e,icon:"tim-icons icon-alert-circle-exc",horizontalAlign:"right",verticalAlign:"bottom",type:t,timeout:5e3})},engageRosNode:function(){var t={command:"engage",arg:"all"};switch(this.robot_ws.state){case"disconnected":case"connected":case"disengaged":t.command="engage",t.arg="all";break;case"engaged":t.command="disengage",t.arg="all";break;default:t.command=null,t.arg=null;break}console.log("Send msg: "+JSON.stringify(t)),this.robot_ws.socket.send(JSON.stringify(t))},getRosNodeState:function(t){console.log("Res msg: "+t.data);var s=JSON.parse(t.data);switch(s.response){case"engaged":"all"==s.arg&&(this.robot_ws.state="engaged");break;case"disengaged":"all"==s.arg&&(this.robot_ws.state="disengaged");break;default:s.command=null,s.arg=null;break}},updateDebugTableData:function(t){var s={id:0,timestamp:0,name:"",message:""},e=new Date(1970,0,1);e.setSeconds(t.header.stamp.secs),s.id=0,s.timestamp=e.getHours().pad(2)+":"+e.getMinutes().pad(2)+":"+e.getSeconds().pad(2),s.name=t.name,s.message=t.msg,this.debugTable.data.push(s),this.debugTable.data.length>this.debugTable.maxMsgDisplaid&&this.debugTable.data.shift()},getDriveStatus:function(t){this.status.drive=t.data},getDrive1Current:function(t){this.current.drive_1=(1e3*t.data).toFixed(2)},getDrive2Current:function(t){this.current.drive_2=(1e3*t.data).toFixed(2)},getDrive1Temp:function(t){this.temp.drive_1=t.data.toFixed(1)},getDrive2Temp:function(t){this.temp.drive_2=t.data.toFixed(1)},getSensorsData:function(t){t.active?this.status.sensors="connected":this.status.sensors="not connected"},unsubscribeTopics:function(){null!=this.messages_topic&&1==this.status_config.message.en&&this.messages_topic.unsubscribe(),null!=this.drive_status_topic&&1==this.status_config.drive.en&&this.drive_status_topic.unsubscribe(),null!=this.current_1_topic&&1==this.status_config.current_1.en&&this.current_1_topic.unsubscribe(),null!=this.current_2_topic&&1==this.status_config.current_2.en&&this.current_2_topic.unsubscribe(),null!=this.temp_1_topic&&1==this.status_config.temp_1.en&&this.temp_1_topic.unsubscribe(),null!=this.temp_2_topic&&1==this.status_config.temp_2.en&&this.temp_2_topic.unsubscribe(),null!=this.sensors_topic&&1==this.status_config.sensor.en&&this.sensors_topic.unsubscribe()},stopStatusSubscribers:function(){null!=this.messages_topic&&1==this.status_config.message.en&&this.messages_topic.unsubscribe(),null!=this.drive_status_topic&&1==this.status_config.drive.en&&this.drive_status_topic.unsubscribe(),null!=this.sensors_topic&&1==this.status_config.temp_2.en&&this.sensors_topic.unsubscribe()},getTopicMsgType:function(t){this.topic_msg_type="rosgraph_msgs/Log"}},created:function(){var t=this;this.configure(),o["bus"].$on("ros-connected",this.init),o["bus"].$on("ros-disconnected",this.deinit);var s=this.status_config.robot_con.address+":"+this.status_config.robot_con.port;this.robot_ws.socket=new WebSocket(s),this.robot_ws.socket.onmessage=this.getRosNodeState,this.robot_ws.socket.onopen=function(s){t.robot_ws.state="connected"}},mounted:function(){0==this.current_state.status?this.notifyVue("danger","Connection failure","Please make sure the connection with the robot is established..."):this.init()},beforeDestroy:function(){o["bus"].$off("ros-connected",this.init),o["bus"].$off("ros-disconnected",this.deinit),this.deinit()}},u=r,_=e("2877"),g=Object(_["a"])(u,i,a,!1,null,null,null);s["default"]=g.exports}}]);
//# sourceMappingURL=dashboard.83706ddb.js.map